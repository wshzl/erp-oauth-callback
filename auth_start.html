<!-- 在原有代码的按钮区域添加 -->
<div style="text-align: center; margin: 30px 0;">
    <button type="button" onclick="startAuthorization()">开始真实授权</button>
    <button type="button" onclick="startMockAuthorization()" style="background: #ff4d4f;">使用模拟授权（测试）</button>
    <button type="button" onclick="testCallback()">测试回调页面</button>
</div>

<script>
// 添加模拟授权函数
function startMockAuthorization() {
    const appKey = document.getElementById('appKey').value;
    const redirectUri = document.getElementById('redirectUri').value;
    
    if (!appKey) {
        alert('请输入App Key');
        return;
    }

    const state = 'state_' + Math.random().toString(36).substring(2, 15);
    
    // 使用模拟授权页面
    const mockAuthUrl = `https://wshzl.github.io/erp-oauth-callback/mock_auth.html?response_type=code&client_id=${encodeURIComponent(appKey)}&redirect_uri=${encodeURIComponent(redirectUri)}&scope=api&state=${state}`;
    
    localStorage.setItem('oauth_state', state);
    localStorage.setItem('oauth_app_key', appKey);
    
    window.location.href = mockAuthUrl;
}
</script>
